webpackJsonp([28],{CtUd:function(t,e){},pvP5:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("0xDb");var n=i("Y8t/"),r=i("hkf/"),u={data:function(){return{interception:{width:{title:this.$t("common.width"),value:0,step:1,range:{start:64,end:this.sourceWidth}},height:{title:this.$t("common.height"),value:0,step:1,range:{start:64,end:this.sourceHeight}},x:{title:this.$t("common.X"),value:0,step:1,range:{start:0,end:this.sourceWidth}},y:{title:this.$t("common.Y"),value:0,step:1,range:{start:0,end:this.sourceHeight}}},winid:0,inputSourceId:0,source:{width:0,height:0,x:0,y:0},inputSourceStyle:{widthRate:0,heightRate:0,sourceWidth:1920,sourceHeight:1080}}},mounted:function(){this.winid=this.$route.params.winId,this.inputSourceId=this.$route.params.inputSourceId,this.getInputSources()},methods:{getInputSources:function(){var t=this;n.a.all(n.a.get(r.a.getInputSourceList),n.a.post(r.a.getInputSourceCrop,{selectWindow:parseInt(this.winid),selectInput:parseInt(this.inputSourceId)})).then(function(e){if(1e7===e[0].status&&1e7===e[1].status){var i=e[0].data.inputSourceList.filter(function(e){return e.id===parseInt(t.$route.params.inputSourceId)}),n=e[1].data;i.length&&(t.inputSourceStyle.sourceWidth=parseInt(i[0].width)?parseInt(i[0].width):1920,t.inputSourceStyle.sourceHeight=parseInt(i[0].height)?parseInt(i[0].height):1080,t.inputSourceStyle.widthRate=t.$refs.inputSource.getBoundingClientRect().width/t.inputSourceStyle.sourceWidth,t.inputSourceStyle.heightRate=t.$refs.inputSource.getBoundingClientRect().height/t.inputSourceStyle.sourceHeight),t.interception.width.range.end=t.inputSourceStyle.sourceWidth,t.interception.x.range.end=t.inputSourceStyle.sourceWidth-t.interception.width.range.start,t.interception.height.range.end=t.inputSourceStyle.sourceHeight,t.interception.y.range.end=t.inputSourceStyle.sourceHeight-t.interception.height.range.start,console.log(n),t.interception.width.value=t.inputSourceStyle.sourceWidth<n.cropWidth?t.inputSourceStyle.sourceWidth:n.cropWidth,t.interception.height.value=t.inputSourceStyle.sourceHeight<n.cropHeight?t.inputSourceStyle.sourceHeight:n.cropHeight,t.interception.x.value=n.cropStartX,t.interception.y.value=n.cropStartY,t.$refs.cutSource.style.width=Math.ceil(t.interception.width.value*t.inputSourceStyle.widthRate)+"px",t.$refs.cutSource.style.height=Math.ceil(t.interception.height.value*t.inputSourceStyle.heightRate)+"px",t.$refs.cutSource.style.left=Math.ceil(t.interception.x.value*t.inputSourceStyle.widthRate)+"px",t.$refs.cutSource.style.top=Math.ceil(t.interception.y.value*t.inputSourceStyle.heightRate)+"px"}})},widthChange:function(t){this.interception.width.value=t,this.$refs.cutSource.style.width=Math.ceil(this.interception.width.value*this.inputSourceStyle.widthRate)+"px",this.interception.x.value+this.interception.width.value>this.inputSourceStyle.sourceWidth&&(this.interception.x.value=this.inputSourceStyle.sourceWidth-this.interception.width.value)},heightChange:function(t){this.interception.height.value=t,this.$refs.cutSource.style.height=Math.ceil(this.interception.height.value*this.inputSourceStyle.heightRate)+"px",this.interception.y.value+this.interception.height.value>this.inputSourceStyle.sourceHeight&&(this.interception.y.value=this.inputSourceStyle.sourceHeight-this.interception.height.value)},xChange:function(t){this.interception.x.value=t,this.$refs.cutSource.style.left=Math.ceil(this.interception.x.value*this.inputSourceStyle.widthRate)+"px",console.log(this.inputSourceStyle.sourceWidth),console.log(this.interception.width.value+this.interception.x.value),this.interception.width.value+this.interception.x.value>this.inputSourceStyle.sourceWidth&&(this.interception.width.value=this.inputSourceStyle.sourceWidth-this.interception.x.value)},yChange:function(t){this.interception.y.value=t,this.$refs.cutSource.style.top=Math.ceil(this.interception.y.value*this.inputSourceStyle.heightRate)+"px",this.interception.height.value+this.interception.y.value>=this.inputSourceStyle.sourceHeight&&(this.interception.height.value=this.inputSourceStyle.sourceHeight-this.interception.y.value)},save:function(){n.a.post(r.a.setInputSourceCrop,{cropHeight:this.interception.height.value,cropWidth:this.interception.width.value,cropStartX:this.interception.x.value,cropStartY:this.interception.y.value,windowId:parseInt(this.winid),inputSourceId:parseInt(this.inputSourceId)})},cancel:function(){this.$router.go(-1)}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"js-scenarist-child"},[i("vx-header",{attrs:{showback:1,title:t.$t("common.cut")}}),t._v(" "),i("div",{staticClass:"vx-container"},[i("div",{staticClass:"interception"},[i("div",{ref:"inputSource",staticClass:"inputSource"},[i("div",{ref:"cutSource",staticClass:"cutsource"})])]),t._v(" "),i("div",{staticClass:"progress-list"},[i("vx-progress",{attrs:{title:t.interception.width.title,num:t.interception.width.value,range:t.interception.width.range,step:t.interception.width.step},on:{update:t.widthChange,touchend:t.save}}),t._v(" "),i("vx-progress",{attrs:{title:t.interception.height.title,num:t.interception.height.value,range:t.interception.height.range,step:t.interception.height.step},on:{update:t.heightChange,touchend:t.save}}),t._v(" "),i("vx-progress",{attrs:{title:t.interception.x.title,num:t.interception.x.value,range:t.interception.x.range,step:t.interception.x.step},on:{update:t.xChange,touchend:t.save}}),t._v(" "),i("vx-progress",{attrs:{title:t.interception.y.title,num:t.interception.y.value,range:t.interception.y.range,step:t.interception.y.step},on:{update:t.yChange,touchend:t.save}})],1)])],1)},staticRenderFns:[]};var c=i("VU/8")(u,o,!1,function(t){i("CtUd")},"data-v-4ad125b4",null);e.default=c.exports}});
//# sourceMappingURL=28.b2717602e661a626c149.js.map