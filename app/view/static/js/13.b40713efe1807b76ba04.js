webpackJsonp([13],{Z9SP:function(t,e){},idCK:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("qONS");var a=i("UQTY"),s=i.n(a),n=(i("34+y"),i("X+yh")),o=i.n(n),c=i("Dd8w"),r=i.n(c),h=i("NYxO"),u=i("0xDb"),l=i("Y8t/"),d=i("hkf/"),f=i("GnDS"),v=i.n(f),m=i("sbrb"),g=i.n(m),p={data:function(){return{indicator:{progress:0,showIndicatoe:!1,time:0,size:0,speed:2100},activeTab:null,selectedBackground:-1,bgColors:["#fff","#65e0d9","#aa71d2","#000"],file:{src:"",img:null,fixedRatio:2,realRatio:1,orient:null},canvas:{cw:0,ch:0,c:null,ctx:null,w:0,h:0},canvasCutFrame:{cw:0,ch:0,c:null,ctx:null,w:0,h:0},canvasCut:{cw:0,ch:0,c:null,ctx:null,w:0,h:0},canvasCutResult:{cw:0,ch:0,c:null,ctx:null,w:0,h:0},cut:{dw:64,dh:64,mw:64,mh:64,w:0,h:0,x:0,y:0,ow:0,oh:0,ox:0,oy:0,area:30},windowWidth:v()(window).width(),windowHeight:v()(window).height()}},created:function(){var t=this;0===this.getUploadImg.type?this.loadFile(this.getUploadImg.src,{init:!0}):(this.indicator.size=this.getUploadImg.size,this.indicator.time=parseInt(this.indicator.size/this.indicator.speed),this.file.src=this.getUploadImg.src,this.$nextTick(function(){t.loadImg({init:!0})}))},mounted:function(){this.canvas.c=this.$refs.canvas,this.canvas.ctx=this.canvas.c.getContext("2d"),this.canvasCutFrame.c=this.$refs["canvas-cut-frame"],this.canvasCutFrame.ctx=this.canvasCutFrame.c.getContext("2d"),this.canvasCut.c=this.$refs["canvas-cut"],this.canvasCut.ctx=this.canvasCut.c.getContext("2d"),this.canvasCutResult.c=this.$refs["canvas-cut-result"],this.canvasCutResult.ctx=this.canvasCutResult.c.getContext("2d")},computed:r()({},Object(h.b)(["getIsHScreen","getUploadImg"]),{headerHeight:function(){return 80/750*lib.flexible.rem*10},bottomHeight:function(){return 100/750*lib.flexible.rem*10},aspectRatio:function(){return this.getIsHScreen?(this.windowWidth-this.bottomHeight-20)/(this.windowHeight-this.headerHeight-10):(this.windowWidth-10)/(this.windowHeight-this.headerHeight-this.bottomHeight-20)},styleCanvasWrapper:function(){var t=void 0,e=void 0;return this.getIsHScreen?t=(e=this.windowHeight-10-this.headerHeight)*this.aspectRatio:e=(t=this.windowWidth-10)/this.aspectRatio,{w:t,h:e}},styleCenter:function(){return{left:(this.styleCanvasWrapper.w-this.canvas.w)/2+this.cut.x/this.file.fixedRatio+this.cut.area/2+"px",top:(this.styleCanvasWrapper.h-this.canvas.h)/2+this.cut.y/this.file.fixedRatio+this.cut.area/2+"px",width:this.cut.w/this.file.fixedRatio-this.cut.area+"px",height:this.cut.h/this.file.fixedRatio-this.cut.area+"px"}},styleLT:function(){return{left:(this.styleCanvasWrapper.w-this.canvas.w)/2+this.cut.x/this.file.fixedRatio-this.cut.area/2+"px",top:(this.styleCanvasWrapper.h-this.canvas.h)/2+this.cut.y/this.file.fixedRatio-this.cut.area/2+"px",width:this.cut.area+"px",height:this.cut.area+"px"}},styleRT:function(){return{left:(this.styleCanvasWrapper.w-this.canvas.w)/2+(this.cut.x+this.cut.w)/this.file.fixedRatio-this.cut.area/2+"px",top:(this.styleCanvasWrapper.h-this.canvas.h)/2+this.cut.y/this.file.fixedRatio-this.cut.area/2+"px",width:this.cut.area+"px",height:this.cut.area+"px"}},styleRB:function(){return{left:(this.styleCanvasWrapper.w-this.canvas.w)/2+(this.cut.x+this.cut.w)/this.file.fixedRatio-this.cut.area/2+"px",top:(this.styleCanvasWrapper.h-this.canvas.h)/2+(this.cut.y+this.cut.h)/this.file.fixedRatio-this.cut.area/2+"px",width:this.cut.area+"px",height:this.cut.area+"px"}},styleLB:function(){return{left:(this.styleCanvasWrapper.w-this.canvas.w)/2+this.cut.x/this.file.fixedRatio-this.cut.area/2+"px",top:(this.styleCanvasWrapper.h-this.canvas.h)/2+(this.cut.y+this.cut.h)/this.file.fixedRatio-this.cut.area/2+"px",width:this.cut.area+"px",height:this.cut.area+"px"}},styleT:function(){return{left:(this.styleCanvasWrapper.w-this.canvas.w)/2+this.cut.x/this.file.fixedRatio+this.cut.area/2+"px",top:(this.styleCanvasWrapper.h-this.canvas.h)/2+this.cut.y/this.file.fixedRatio-this.cut.area/2+"px",width:this.cut.w/this.file.fixedRatio-this.cut.area+"px",height:this.cut.area+"px"}},styleR:function(){return{left:(this.styleCanvasWrapper.w-this.canvas.w)/2+(this.cut.x+this.cut.w)/this.file.fixedRatio-this.cut.area/2+"px",top:(this.styleCanvasWrapper.h-this.canvas.h)/2+this.cut.y/this.file.fixedRatio+this.cut.area/2+"px",width:this.cut.area+"px",height:this.cut.h/this.file.fixedRatio-this.cut.area+"px"}},styleB:function(){return{left:(this.styleCanvasWrapper.w-this.canvas.w)/2+this.cut.x/this.file.fixedRatio+this.cut.area/2+"px",top:(this.styleCanvasWrapper.h-this.canvas.h)/2+(this.cut.y+this.cut.h)/this.file.fixedRatio-this.cut.area/2+"px",width:this.cut.w/this.file.fixedRatio-this.cut.area+"px",height:this.cut.area+"px"}},styleL:function(){return{left:(this.styleCanvasWrapper.w-this.canvas.w)/2+this.cut.x/this.file.fixedRatio-this.cut.area/2+"px",top:(this.styleCanvasWrapper.h-this.canvas.h)/2+this.cut.y/this.file.fixedRatio+this.cut.area/2+"px",width:this.cut.area+"px",height:this.cut.h/this.file.fixedRatio-this.cut.area+"px"}},isBase64:function(){return!(!this.file.src||!/data:image\/(png|jpeg|jpg);base64/g.test(this.file.src))}}),watch:{getIsHScreen:function(t){var e=this;setTimeout(function(){e.windowWidth=v()(window).width(),e.windowHeight=v()(window).height(),e.loadImg()},500)},getUploadImg:function(t,e){t.src!==e.src&&this.loadFile(t.src,{init:!0})},"indicator.progress":function(t){var e=this;this.file.img||(-1===t?(o()(this.$t("common.requestFailed")),setTimeout(function(){e.$router.go(-1)},300)):-2===t&&this.$router.go(-1)),this.indicator.time=parseInt(this.indicator.size/this.indicator.speed*(1-t/100))}},methods:r()({},Object(h.c)(["setUploadImg"]),{openPics:function(){this.$refs.imgupload.createEventBroadcast()},loadFile:function(t){for(var e=this,i=arguments.length,a=Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];if(!t)return!1;this.openIndicator();var n=new FileReader;n.readAsDataURL(t),n.onload=function(i){e.closeIndicator(),e.file.src=i.target.result,e.setUploadImg({name:t.name}),e.loadImg(a)},n.onerror=function(t){e.closeIndicator()}},loadImg:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.init,a=void 0!==i&&i,s=e.restore,n=null;a||void 0!==s&&s?(n=this.$refs.loadedImg,a&&(n.src=this.file.src)):(n=new Image).src=this.file.src,this.isBase64||n.complete||1!==this.getUploadImg.type?this.openIndicator():(this.indicator.showIndicatoe=!0,this.getProgress()),n.complete?this.handleLoadImg(n):n.onload=function(){t.handleLoadImg(n)},n.onerror=function(){t.indicator.showIndicatoe=!1,t.closeIndicator()}},handleLoadImg:function(t){this.indicator.showIndicatoe=!1,this.closeIndicator(),this.file.img=t,this.file.orient=this.getPhotoOrientation(t),this.initCanvas(),this.cancelCut(),this.drawImage(),this.isBase64||(this.canvasCut.cw=this.file.img.width,this.canvasCut.ch=this.file.img.height,this.canvasCut.c.width=Math.round(this.canvasCut.cw),this.canvasCut.c.height=Math.round(this.canvasCut.ch),this.canvasCut.ctx.clearRect(0,0,this.canvasCut.cw,this.canvasCut.ch),this.canvasCut.ctx.drawImage(this.file.img,0,0,this.canvasCut.cw,this.canvasCut.ch)),(t.width>1920||t.height>1080)&&this.openCut()},initCanvas:function(){var t=this.file.img.width,e=this.file.img.height;6!==this.file.orient&&8!==this.file.orient||(t=this.file.img.height,e=this.file.img.width),this.getIsHScreen?t/e>this.aspectRatio?(this.canvas.cw=(this.windowHeight-10-this.headerHeight)*this.file.fixedRatio*this.aspectRatio,this.canvas.ch=this.canvas.cw/(t/e)):(this.canvas.ch=(this.windowHeight-10-this.headerHeight)*this.file.fixedRatio,this.canvas.cw=this.canvas.ch*t/e):t/e>this.aspectRatio?(this.canvas.cw=(this.windowWidth-10)*this.file.fixedRatio,this.canvas.ch=this.canvas.cw/(t/e)):(this.canvas.ch=(this.windowWidth-10)*this.file.fixedRatio/this.aspectRatio,this.canvas.cw=this.canvas.ch*t/e),this.canvas.c.width=Math.round(this.canvas.cw),this.canvas.c.height=Math.round(this.canvas.ch),this.canvas.w=this.canvas.cw/this.file.fixedRatio,this.canvas.h=this.canvas.ch/this.file.fixedRatio,this.canvas.x=this.styleCanvasWrapper.w/2-this.canvas.w/2,this.canvas.y=this.styleCanvasWrapper.h/2-this.canvas.h/2,this.canvasCutFrame.c.width=Math.round(this.canvas.cw),this.canvasCutFrame.c.height=Math.round(this.canvas.ch),this.canvasCutFrame.w=this.canvas.cw,this.canvasCutFrame.h=this.canvas.ch,this.canvasCutFrame.x=this.canvas.x,this.canvasCutFrame.y=this.canvas.y,this.file.realRatio=t/this.canvas.cw,this.cut.mw=Math.max(this.cut.dw*this.file.fixedRatio,this.cut.dw/this.file.realRatio),this.cut.mh=Math.max(this.cut.dh*this.file.fixedRatio,this.cut.dh/this.file.realRatio)},drawImage:function(){this.file.orient>1?(this.canvas.ctx.clearRect(0,0,this.canvas.cw,this.canvas.ch),this.canvas.ctx.save(),3===this.file.orient?(this.canvas.ctx.rotate(Math.PI),this.canvas.ctx.drawImage(this.file.img,-this.canvas.cw,-this.canvas.ch,this.canvas.cw,this.canvas.ch)):(this.canvas.ctx.translate(this.canvas.cw/2,this.canvas.ch/2),this.canvas.ctx.rotate((6===this.file.orient?90:-90)*Math.PI/180),this.canvas.ctx.translate(-this.canvas.ch/2,-this.canvas.cw/2),this.canvas.ctx.drawImage(this.file.img,0,0,this.canvas.ch,this.canvas.cw)),this.canvas.ctx.restore()):(this.canvas.ctx.clearRect(0,0,this.canvas.cw,this.canvas.ch),this.canvas.ctx.drawImage(this.file.img,0,0,this.canvas.cw,this.canvas.ch))},initCut:function(){this.cut.w=this.canvas.cw,this.cut.h=this.canvas.ch,this.cut.x=0,this.cut.y=0,this.cut.ow=this.cut.w,this.cut.oh=this.cut.h,this.cut.ox=this.cut.x,this.cut.oy=this.cut.y},drawCut:function(){this.canvasCutFrame.ctx.clearRect(0,0,this.canvas.cw,this.canvas.ch),this.canvasCutFrame.ctx.fillStyle="rgba(0,0,0,0.8)",this.canvasCutFrame.ctx.fillRect(0,0,this.canvas.cw,this.canvas.ch),this.canvasCutFrame.ctx.clearRect(this.cut.x,this.cut.y,this.cut.w,this.cut.h),this.canvasCutFrame.ctx.strokeStyle="rgba(255,255,255,0.8)",this.canvasCutFrame.ctx.lineWidth=this.file.fixedRatio,this.canvasCutFrame.ctx.beginPath(),this.canvasCutFrame.ctx.moveTo(this.cut.x,this.cut.y),this.canvasCutFrame.ctx.lineTo(this.cut.x+this.cut.w,this.cut.y),this.canvasCutFrame.ctx.moveTo(this.cut.x,this.cut.y+this.cut.h/3),this.canvasCutFrame.ctx.lineTo(this.cut.x+this.cut.w,this.cut.y+this.cut.h/3),this.canvasCutFrame.ctx.moveTo(this.cut.x,this.cut.y+this.cut.h/3*2),this.canvasCutFrame.ctx.lineTo(this.cut.x+this.cut.w,this.cut.y+this.cut.h/3*2),this.canvasCutFrame.ctx.moveTo(this.cut.x,this.cut.y+this.cut.h),this.canvasCutFrame.ctx.lineTo(this.cut.x+this.cut.w,this.cut.y+this.cut.h),this.canvasCutFrame.ctx.moveTo(this.cut.x,this.cut.y),this.canvasCutFrame.ctx.lineTo(this.cut.x,this.cut.y+this.cut.h),this.canvasCutFrame.ctx.moveTo(this.cut.x+this.cut.w/3,this.cut.y),this.canvasCutFrame.ctx.lineTo(this.cut.x+this.cut.w/3,this.cut.y+this.cut.h),this.canvasCutFrame.ctx.moveTo(this.cut.x+this.cut.w/3*2,this.cut.y),this.canvasCutFrame.ctx.lineTo(this.cut.x+this.cut.w/3*2,this.cut.y+this.cut.h),this.canvasCutFrame.ctx.moveTo(this.cut.x+this.cut.w,this.cut.y),this.canvasCutFrame.ctx.lineTo(this.cut.x+this.cut.w,this.cut.y+this.cut.h),this.canvasCutFrame.ctx.closePath(),this.canvasCutFrame.ctx.stroke()},moveCenter:function(t,e,i){"panend"===t||"pancancel"===t?this.panEnd():(this.cut.x=Math.min(Math.max(this.cut.ox+e.deltaX*this.file.fixedRatio,0),this.canvas.cw-this.cut.w),this.cut.y=Math.min(Math.max(this.cut.oy+e.deltaY*this.file.fixedRatio,0),this.canvas.ch-this.cut.h),this.drawCut())},moveCorner:function(t,e,i,a){var s=a.left,n=a.right,o=a.top,c=a.bottom;"panend"===t||"pancancel"===t?this.panEnd():(s&&(this.cut.x=Math.min(Math.max(this.cut.ox+e.deltaX*this.file.fixedRatio,0),this.cut.ox+this.cut.ow-this.cut.mw),this.cut.w=Math.min(Math.max(this.cut.ow-e.deltaX*this.file.fixedRatio,this.cut.mw),this.cut.ox+this.cut.ow)),n&&(this.cut.w=Math.min(Math.max(this.cut.ow+e.deltaX*this.file.fixedRatio,this.cut.mw),this.canvas.cw-this.cut.ox)),o&&(this.cut.y=Math.min(Math.max(this.cut.oy+e.deltaY*this.file.fixedRatio,0),this.cut.oy+this.cut.oh-this.cut.mh),this.cut.h=Math.min(Math.max(this.cut.oh-e.deltaY*this.file.fixedRatio,this.cut.mh),this.cut.oy+this.cut.oh)),c&&(this.cut.h=Math.min(Math.max(this.cut.oh+e.deltaY*this.file.fixedRatio,this.cut.mh),this.canvas.ch-this.cut.oy)),this.drawCut())},moveLT:function(t,e,i){this.moveCorner(t,e,i,{left:!0,top:!0})},moveRT:function(t,e,i){this.moveCorner(t,e,i,{right:!0,top:!0})},moveRB:function(t,e,i){this.moveCorner(t,e,i,{right:!0,bottom:!0})},moveLB:function(t,e,i){this.moveCorner(t,e,i,{left:!0,bottom:!0})},moveT:function(t,e,i){this.moveCorner(t,e,i,{top:!0})},moveR:function(t,e,i){this.moveCorner(t,e,i,{right:!0})},moveB:function(t,e,i){this.moveCorner(t,e,i,{bottom:!0})},moveL:function(t,e,i){this.moveCorner(t,e,i,{left:!0})},panEnd:function(){this.cut.ox=this.cut.x,this.cut.oy=this.cut.y,this.cut.ow=this.cut.w,this.cut.oh=this.cut.h},drawImageCut:function(t){var e=this;if(!this.isBase64)return t(),!1;var i=this.file.img.width,a=this.file.img.height;6!==this.file.orient&&8!==this.file.orient||(i=this.file.img.height,a=this.file.img.width),this.canvasCut.cw=i,this.canvasCut.ch=a,this.canvasCut.c.width=Math.round(this.canvasCut.cw),this.canvasCut.c.height=Math.round(this.canvasCut.ch),this.canvasCut.ctx.clearRect(0,0,this.canvasCut.cw,this.canvasCut.ch);var s=new Image;s.crossOrigin="*",s.src=this.file.src,s.onload=function(){e.file.orient>1?(e.canvasCut.ctx.clearRect(0,0,e.canvasCut.cw,e.canvasCut.ch),e.canvasCut.ctx.save(),3===e.file.orient?(e.canvasCut.ctx.rotate(Math.PI),e.canvasCut.ctx.drawImage(e.file.img,-e.canvasCut.cw,-e.canvasCut.ch,e.canvasCut.cw,e.canvasCut.ch)):(e.canvasCut.ctx.translate(e.canvasCut.cw/2,e.canvasCut.ch/2),e.canvasCut.ctx.rotate((6===e.file.orient?90:-90)*Math.PI/180),e.canvasCut.ctx.translate(-e.canvasCut.ch/2,-e.canvasCut.cw/2),e.canvasCut.ctx.drawImage(e.file.img,0,0,e.canvasCut.ch,e.canvasCut.cw)),e.canvasCut.ctx.restore()):e.canvasCut.ctx.drawImage(s,0,0),t()}},restore:function(){this.activeTab=1,0===this.getUploadImg.type?this.loadFile(this.getUploadImg.src,{restore:!0}):(this.file.src=this.getUploadImg.src,this.loadImg({restore:!0}))},openCut:function(){this.activeTab=2,this.drawCut()},imgCut:function(){var t=this;this.openIndicator(),this.drawImageCut(function(){var e=t.canvasCut.ctx.getImageData(t.cut.x*t.file.realRatio,t.cut.y*t.file.realRatio,t.cut.w*t.file.realRatio,t.cut.h*t.file.realRatio);t.canvasCutResult.c.width=Math.round(t.cut.w*t.file.realRatio),t.canvasCutResult.c.height=Math.round(t.cut.h*t.file.realRatio),t.canvasCutResult.ctx.putImageData(e,0,0),setTimeout(function(){var e=t.canvasCutResult.c.toDataURL("image/png");t.file.src=e,t.loadImg(),t.closeIndicator()},300)})},cancelCut:function(){this.initCut(),this.activeTab=null},toggleBgColor:function(){4===this.activeTab?this.activeTab=null:this.activeTab=4},changeBgColor:function(t){this.selectedBackground=t},upload:function(){var t=this;return!!this.file.img&&(this.file.img.width>1920||this.file.img.height>1080?(o()(this.$t("osd.overSize")),!1):this.isBase64?void l.a.post(d.a.setOsdEditInfo,{type:0,id:1===this.getUploadImg.type?this.getUploadImg.id:-1},{loading:!1}).then(function(e){if(1e7===e.status){t.indicator.showIndicatoe=!0,t.indicator.speed=2371,t.indicator.size=t.file.img.width*t.file.img.height,t.indicator.time=parseInt(t.indicator.size/t.indicator.speed),t.indicator.progress=0,t.getProgress();var i=Object(u.e)(t.file.src,t.getUploadImg.name),a=new FormData;a.append(t.getUploadImg.name,i),l.a.upload(d.a.uploadOSD,a).then(function(e){t.indicator.showIndicatoe=!1,1e7===e.status?(o()(t.$t("osd.uploadSuccess")),setTimeout(function(){t.$router.go(-1)},300)):20070001===e.errorCode[0]||(20070002===e.errorCode[0]?o()(t.$t("osd.OSDBusy")):o()(t.$t("common.serverException")))})}}):(setTimeout(function(){t.$router.go(-1)},300),!1))},getProgress:function(){var t=this;if(-2===this.indicator.progress||-1===this.indicator.progress)return!1;l.a.post(d.a.getProgress,{control:1},{loading:!1}).then(function(e){1e7===e.status&&-2!==t.indicator.progress&&(t.indicator.progress=e.data.progress,-1===t.indicator.progress||100===e.data.progress?t.indicator.showIndicatoe=!1:t.getProgress())})},progressCancel:function(){var t=this;Object(u.b)(this.$t("osd.cancelOSD")).then(function(e){l.a.post(d.a.getProgress,{control:0},{loading:!1}).then(function(e){t.indicator.progress=-2,t.indicator.showIndicatoe=!1})})},openIndicator:function(t){s.a.open({text:t})},closeIndicator:function(){setTimeout(function(){s.a.close()},100)},getPhotoOrientation:function(t){var e=0;return this.isBase64&&g.a.getData(t,function(){e=g.a.getTag(this,"Orientation")}),e}})},x={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"edit-osd"},[i("vx-header",{attrs:{showcancel:2!==t.activeTab,showOsdFont:2!==t.activeTab,title:2===t.activeTab?t.$t("osd.crop"):"OSD"},on:{savesFont:t.upload,cancel:function(e){t.$router.go(-1)}}}),t._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:0,expression:"0"}],ref:"loadedImg",attrs:{src:"",crossOrigin:"*"}}),t._v(" "),i("div",{staticClass:"osd-warp",class:{"vx-container":!t.getIsHScreen}},[i("div",{staticClass:"edit-warp",class:{horizontal:t.getIsHScreen},style:{width:t.styleCanvasWrapper.w+"px",height:t.styleCanvasWrapper.h+"px",backgroundColor:t.bgColors[t.selectedBackground]||"#212124"}},[i("span",{directives:[{name:"show",rawName:"v-show",value:2==t.activeTab,expression:"activeTab == 2"}],staticClass:"cut-size"},[t._v(t._s(Math.round(t.cut.w*t.file.realRatio))+"*"+t._s(Math.round(t.cut.h*t.file.realRatio)))]),t._v(" "),i("canvas",{ref:"canvas",staticClass:"canvas",style:{width:t.canvas.w+"px",height:t.canvas.h+"px",left:t.canvas.x+"px",top:t.canvas.y+"px"}}),t._v(" "),i("canvas",{directives:[{name:"show",rawName:"v-show",value:2==t.activeTab,expression:"activeTab == 2"}],ref:"canvas-cut-frame",staticClass:"canvas",style:{width:t.canvas.w+"px",height:t.canvas.h+"px",left:t.canvas.x+"px",top:t.canvas.y+"px"},attrs:{index:0}}),t._v(" "),i("canvas",{directives:[{name:"show",rawName:"v-show",value:0,expression:"0"}],ref:"canvas-cut",staticClass:"canvas"}),t._v(" "),i("canvas",{directives:[{name:"show",rawName:"v-show",value:0,expression:"0"}],ref:"canvas-cut-result",staticClass:"canvas"}),t._v(" "),2==t.activeTab?[i("div",{directives:[{name:"touch",rawName:"v-touch.pan",value:t.moveCenter,expression:"moveCenter",modifiers:{pan:!0}}],staticClass:"corner",style:t.styleCenter,attrs:{index:0}}),t._v(" "),i("div",{directives:[{name:"touch",rawName:"v-touch.pan",value:t.moveLT,expression:"moveLT",modifiers:{pan:!0}}],staticClass:"corner corner-left-top",style:t.styleLT,attrs:{index:0}}),t._v(" "),i("div",{directives:[{name:"touch",rawName:"v-touch.pan",value:t.moveRT,expression:"moveRT",modifiers:{pan:!0}}],staticClass:"corner corner-right-top",style:t.styleRT,attrs:{index:0}}),t._v(" "),i("div",{directives:[{name:"touch",rawName:"v-touch.pan",value:t.moveRB,expression:"moveRB",modifiers:{pan:!0}}],staticClass:"corner corner-right-bottom",style:t.styleRB,attrs:{index:0}}),t._v(" "),i("div",{directives:[{name:"touch",rawName:"v-touch.pan",value:t.moveLB,expression:"moveLB",modifiers:{pan:!0}}],staticClass:"corner corner-left-bottom",style:t.styleLB,attrs:{index:0}}),t._v(" "),i("div",{directives:[{name:"touch",rawName:"v-touch.pan",value:t.moveT,expression:"moveT",modifiers:{pan:!0}}],staticClass:"corner",style:t.styleT,attrs:{index:0}}),t._v(" "),i("div",{directives:[{name:"touch",rawName:"v-touch.pan",value:t.moveR,expression:"moveR",modifiers:{pan:!0}}],staticClass:"corner",style:t.styleR,attrs:{index:0}}),t._v(" "),i("div",{directives:[{name:"touch",rawName:"v-touch.pan",value:t.moveB,expression:"moveB",modifiers:{pan:!0}}],staticClass:"corner",style:t.styleB,attrs:{index:0}}),t._v(" "),i("div",{directives:[{name:"touch",rawName:"v-touch.pan",value:t.moveL,expression:"moveL",modifiers:{pan:!0}}],staticClass:"corner",style:t.styleL,attrs:{index:0}})]:t._e()],2),t._v(" "),4==t.activeTab?i("div",{staticClass:"operator-tabs"},[i("div",{staticClass:"backgroundtab"},t._l(t.bgColors,function(e,a){return i("div",{staticClass:"bgitem",class:{selected:t.selectedBackground==a},style:{backgroundColor:e},on:{click:function(e){t.changeBgColor(a)}}})}))]):t._e(),t._v(" "),2==t.activeTab?i("div",{staticClass:"cuttab"},[i("div",{staticClass:"del btn",on:{click:t.cancelCut}},[t._v(t._s(t.$t("common.cancel")))]),t._v(" "),i("div",{staticClass:"ok btn",on:{click:t.imgCut}},[t._v(t._s(t.$t("common.complete")))])]):t._e(),t._v(" "),i("div",{staticClass:"operators"},[i("div",{staticClass:"operators-item btn",on:{click:t.restore}},[i("div",{staticClass:"operators-item-icon",class:{"resetpic-o":1==t.activeTab,resetpic:1!=t.activeTab}})]),t._v(" "),i("div",{staticClass:"operators-item btn",on:{click:t.openCut}},[i("div",{staticClass:"operators-item-icon cutpic",class:{"cutpic-o":2==t.activeTab,cutpic:2!=t.activeTab}})]),t._v(" "),i("div",{staticClass:"operators-item btn",on:{click:t.openPics}},[i("div",{staticClass:"operators-item-icon picture",class:{"picture-o":3==t.activeTab,picture:3!=t.activeTab}})]),t._v(" "),i("div",{staticClass:"operators-item btn",on:{click:t.toggleBgColor}},[i("div",{staticClass:"operators-item-icon background",class:{"background-o":4==t.activeTab,background:4!=t.activeTab}})])])]),t._v(" "),i("vx-imgupload",{ref:"imgupload"}),t._v(" "),t.indicator.showIndicatoe?i("vx-indicator",{attrs:{text:t.indicator.progress,time:t.indicator.time},on:{progressCancel:t.progressCancel}}):t._e()],1)},staticRenderFns:[]};var w=i("VU/8")(p,x,!1,function(t){i("Z9SP")},"data-v-e20b81c0",null);e.default=w.exports},sbrb:function(t,e,i){var a;(function(){var i=!1,s=function(t){return t instanceof s?t:this instanceof s?void(this.EXIFwrapped=t):new s(t)};void 0!==t&&t.exports&&(e=t.exports=s),e.EXIF=s;var o=s.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},c=s.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},r=s.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},h=s.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},u=s.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function l(t){return!!t.exifdata}function d(t,e){function a(a){var n=f(a);t.exifdata=n||{};var o=function(t){var e=new DataView(t);i&&console.log("Got file of length "+t.byteLength);if(255!=e.getUint8(0)||216!=e.getUint8(1))return i&&console.log("Not a valid JPEG"),!1;var a=2,s=t.byteLength,n=function(t,e){return 56===t.getUint8(e)&&66===t.getUint8(e+1)&&73===t.getUint8(e+2)&&77===t.getUint8(e+3)&&4===t.getUint8(e+4)&&4===t.getUint8(e+5)};for(;a<s;){if(n(e,a)){var o=e.getUint8(a+7);o%2!=0&&(o+=1),0===o&&(o=4);var c=a+8+o,r=e.getUint16(a+6+o);return m(t,c,r)}a++}}(a);if(t.iptcdata=o||{},s.isXmpEnabled){var c=function(t){if(!("DOMParser"in self))return;var e=new DataView(t);i&&console.log("Got file of length "+t.byteLength);if(255!=e.getUint8(0)||216!=e.getUint8(1))return i&&console.log("Not a valid JPEG"),!1;var a=2,s=t.byteLength,n=new DOMParser;for(;a<s-4;){if("http"==x(e,a,4)){var o=a-1,c=e.getUint16(a-2)-1,r=x(e,o,c),h=r.indexOf("xmpmeta>")+8,u=(r=r.substring(r.indexOf("<x:xmpmeta"),h)).indexOf("x:xmpmeta")+10;r=r.slice(0,u)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+r.slice(u);var l=n.parseFromString(r,"text/xml");return y(l)}a++}}(a);t.xmpdata=c||{}}e&&e.call(t)}if(t.src)if(/^data\:/i.test(t.src))a(function(t,e){e=e||t.match(/^data\:([^\;]+)\;base64,/im)[1]||"",t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var i=atob(t),a=i.length,s=new ArrayBuffer(a),n=new Uint8Array(s),o=0;o<a;o++)n[o]=i.charCodeAt(o);return s}(t.src));else if(/^blob\:/i.test(t.src)){(o=new FileReader).onload=function(t){a(t.target.result)},function(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="blob",i.onload=function(t){200!=this.status&&0!==this.status||e(this.response)},i.send()}(t.src,function(t){o.readAsArrayBuffer(t)})}else{var n=new XMLHttpRequest;n.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";a(n.response),n=null},n.open("GET",t.src,!0),n.responseType="arraybuffer",n.send(null)}else if(self.FileReader&&(t instanceof self.Blob||t instanceof self.File)){var o;(o=new FileReader).onload=function(t){i&&console.log("Got file of length "+t.target.result.byteLength),a(t.target.result)},o.readAsArrayBuffer(t)}}function f(t){var e=new DataView(t);if(i&&console.log("Got file of length "+t.byteLength),255!=e.getUint8(0)||216!=e.getUint8(1))return i&&console.log("Not a valid JPEG"),!1;for(var a,s=2,n=t.byteLength;s<n;){if(255!=e.getUint8(s))return i&&console.log("Not a valid marker at offset "+s+", found: "+e.getUint8(s)),!1;if(a=e.getUint8(s+1),i&&console.log(a),225==a)return i&&console.log("Found 0xFFE1 marker"),w(e,s+4,e.getUint16(s+2));s+=2+e.getUint16(s+2)}}var v={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function m(t,e,i){for(var a,s,n,o,c=new DataView(t),r={},h=e;h<e+i;)28===c.getUint8(h)&&2===c.getUint8(h+1)&&(o=c.getUint8(h+2))in v&&((n=c.getInt16(h+3))+5,s=v[o],a=x(c,h+5,n),r.hasOwnProperty(s)?r[s]instanceof Array?r[s].push(a):r[s]=[r[s],a]:r[s]=a),h++;return r}function g(t,e,a,s,n){var o,c,r,h=t.getUint16(a,!n),u={};for(r=0;r<h;r++)o=a+12*r+2,!(c=s[t.getUint16(o,!n)])&&i&&console.log("Unknown tag: "+t.getUint16(o,!n)),u[c]=p(t,o,e,a,n);return u}function p(t,e,i,a,s){var n,o,c,r,h,u,l=t.getUint16(e+2,!s),d=t.getUint32(e+4,!s),f=t.getUint32(e+8,!s)+i;switch(l){case 1:case 7:if(1==d)return t.getUint8(e+8,!s);for(n=d>4?f:e+8,o=[],r=0;r<d;r++)o[r]=t.getUint8(n+r);return o;case 2:return x(t,n=d>4?f:e+8,d-1);case 3:if(1==d)return t.getUint16(e+8,!s);for(n=d>2?f:e+8,o=[],r=0;r<d;r++)o[r]=t.getUint16(n+2*r,!s);return o;case 4:if(1==d)return t.getUint32(e+8,!s);for(o=[],r=0;r<d;r++)o[r]=t.getUint32(f+4*r,!s);return o;case 5:if(1==d)return h=t.getUint32(f,!s),u=t.getUint32(f+4,!s),(c=new Number(h/u)).numerator=h,c.denominator=u,c;for(o=[],r=0;r<d;r++)h=t.getUint32(f+8*r,!s),u=t.getUint32(f+4+8*r,!s),o[r]=new Number(h/u),o[r].numerator=h,o[r].denominator=u;return o;case 9:if(1==d)return t.getInt32(e+8,!s);for(o=[],r=0;r<d;r++)o[r]=t.getInt32(f+4*r,!s);return o;case 10:if(1==d)return t.getInt32(f,!s)/t.getInt32(f+4,!s);for(o=[],r=0;r<d;r++)o[r]=t.getInt32(f+8*r,!s)/t.getInt32(f+4+8*r,!s);return o}}function x(t,e,i){var a="";for(n=e;n<e+i;n++)a+=String.fromCharCode(t.getUint8(n));return a}function w(t,e){if("Exif"!=x(t,e,4))return i&&console.log("Not valid EXIF data! "+x(t,e,4)),!1;var a,s,n,l,d,f=e+6;if(18761==t.getUint16(f))a=!1;else{if(19789!=t.getUint16(f))return i&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;a=!0}if(42!=t.getUint16(f+2,!a))return i&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var v=t.getUint32(f+4,!a);if(v<8)return i&&console.log("Not valid TIFF data! (First offset less than 8)",t.getUint32(f+4,!a)),!1;if((s=g(t,f,f+v,c,a)).ExifIFDPointer)for(n in l=g(t,f,f+s.ExifIFDPointer,o,a)){switch(n){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":l[n]=u[n][l[n]];break;case"ExifVersion":case"FlashpixVersion":l[n]=String.fromCharCode(l[n][0],l[n][1],l[n][2],l[n][3]);break;case"ComponentsConfiguration":l[n]=u.Components[l[n][0]]+u.Components[l[n][1]]+u.Components[l[n][2]]+u.Components[l[n][3]]}s[n]=l[n]}if(s.GPSInfoIFDPointer)for(n in d=g(t,f,f+s.GPSInfoIFDPointer,r,a)){switch(n){case"GPSVersionID":d[n]=d[n][0]+"."+d[n][1]+"."+d[n][2]+"."+d[n][3]}s[n]=d[n]}return s.thumbnail=function(t,e,i,a){var s=function(t,e,i){var a=t.getUint16(e,!i);return t.getUint32(e+2+12*a,!i)}(t,e+i,a);if(!s)return{};if(s>t.byteLength)return{};var n=g(t,e,e+s,h,a);if(n.Compression)switch(n.Compression){case 6:if(n.JpegIFOffset&&n.JpegIFByteCount){var o=e+n.JpegIFOffset,c=n.JpegIFByteCount;n.blob=new Blob([new Uint8Array(t.buffer,o,c)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",n.Compression)}else 2==n.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");return n}(t,f,v,a),s}function C(t){var e={};if(1==t.nodeType){if(t.attributes.length>0){e["@attributes"]={};for(var i=0;i<t.attributes.length;i++){var a=t.attributes.item(i);e["@attributes"][a.nodeName]=a.nodeValue}}}else if(3==t.nodeType)return t.nodeValue;if(t.hasChildNodes())for(var s=0;s<t.childNodes.length;s++){var n=t.childNodes.item(s),o=n.nodeName;if(null==e[o])e[o]=C(n);else{if(null==e[o].push){var c=e[o];e[o]=[],e[o].push(c)}e[o].push(C(n))}}return e}function y(t){try{var e={};if(t.children.length>0)for(var i=0;i<t.children.length;i++){var a=t.children.item(i),s=a.attributes;for(var n in s){var o=s[n],c=o.nodeName,r=o.nodeValue;void 0!==c&&(e[c]=r)}var h=a.nodeName;if(void 0===e[h])e[h]=C(a);else{if(void 0===e[h].push){var u=e[h];e[h]=[],e[h].push(u)}e[h].push(C(a))}}else e=t.textContent;return e}catch(t){console.log(t.message)}}s.enableXmp=function(){s.isXmpEnabled=!0},s.disableXmp=function(){s.isXmpEnabled=!1},s.getData=function(t,e){return!((self.Image&&t instanceof self.Image||self.HTMLImageElement&&t instanceof self.HTMLImageElement)&&!t.complete)&&(l(t)?e&&e.call(t):d(t,e),!0)},s.getTag=function(t,e){if(l(t))return t.exifdata[e]},s.getIptcTag=function(t,e){if(l(t))return t.iptcdata[e]},s.getAllTags=function(t){if(!l(t))return{};var e,i=t.exifdata,a={};for(e in i)i.hasOwnProperty(e)&&(a[e]=i[e]);return a},s.getAllIptcTags=function(t){if(!l(t))return{};var e,i=t.iptcdata,a={};for(e in i)i.hasOwnProperty(e)&&(a[e]=i[e]);return a},s.pretty=function(t){if(!l(t))return"";var e,i=t.exifdata,a="";for(e in i)i.hasOwnProperty(e)&&("object"==typeof i[e]?i[e]instanceof Number?a+=e+" : "+i[e]+" ["+i[e].numerator+"/"+i[e].denominator+"]\r\n":a+=e+" : ["+i[e].length+" values]\r\n":a+=e+" : "+i[e]+"\r\n");return a},s.readFromBinaryFile=function(t){return f(t)},void 0===(a=function(){return s}.apply(e,[]))||(t.exports=a)}).call(this)}});
//# sourceMappingURL=13.b40713efe1807b76ba04.js.map